<!DOCTYPE html>
<html> 
	<head> 
		<title>Menu En</title> 
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<link rel="stylesheet" type="text/css" href="menu_en/menu_en.css" />
		
		
	</head> 
	<body>
		<script id="replace_with_navbar" src="nav.js"></script>				
		<div class="banner"> 			
			<h2>English Menu</h2> 						
		</div>
		
		<!-- Next and previous buttons -->
		<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
		
		<div id="image-gallery">			
			<img id="current-image" alt = "Image Gallery">			
			<span id="overlay" class="loading-spinner"></span>
		</div>
		
		<a class="next" onclick="plusSlides(1)">&#10095;</a>
		
		<div class="grid-container"> 
			<div id="image-thumbs"></div>						
		</div>
				
		<script>
			
			// max is the total number of images in the folder (or less)
			let max = 3;
			max += -1 	// Arrays are one less than max
			
			const images = [
			'Menu_En_Breakfast',
			'Menu_En_Sunday',
			'Menu_En_ChipShop'
			];
			
			var imageThumbs = document.getElementById("image-thumbs");
			var currentImage = document.getElementById("current-image");
			
			
			let i = 0;
			let startwith = 0
			
			var tempImg = new Image();
			tempImg.onload = function(){
				currentImage.src = "menu_en/images/" + images[startwith] + ".jpg"
				currentImage.alt = "Menu Image " + images[startwith] + ".jpg";

				appendImage();
			}
			
			var tryLoadImage = function(){
				tempImg.src = "menu_en/thumbnails/" + images[i] + ".jpg";
			}
			
			var appendImage = function(){
				var thumb = document.createElement("img");
				thumb.src = tempImg.src;
				thumb.alt = "Image Gallery Image" + images[i] + ".jpg";
				thumb.number = i; // note which thumbnail is which
				thumb.classList.add("thumb");
				imageThumbs.appendChild(thumb);
				thumb.addEventListener("click", function() {
					// need to set startwith to the image we clicked on
					// so that we can prev/next 
					startwith = this.number;
										
					document.getElementsByClassName("loading-spinner")[0].style.visibility = "visible";
					currentImage.src = this.src.replace("thumbnails/", "images/");
					
					
					function checkLoaded(){
						var finishedLoading = document.getElementById("current-image").complete;
						
						if (finishedLoading) { 
							document.getElementsByClassName("loading-spinner")[0].style.visibility = "hidden"; 
						}
						
						setTimeout(checkLoaded, 1000);
					}
					
					checkLoaded();
					
					clearTimeout(checkLoaded);
					window.scrollTo({ top: 0, behavior: 'smooth' });
					
				} );
				
				tryLoadImage(i++)
			}
			
			
			tryLoadImage(i);
			
			// Next/previous controls
			function plusSlides(y) {
				startwith += y;
				
				if (startwith > max) startwith = 0;
				if (startwith < 0) startwith = max;
				
				currentImage.src = "menu_en/images/" + images[startwith] + ".jpg";
				currentImage.alt = "Image Gallery " + images[startwith];
			}
			
		</script>
	</body>
</html>